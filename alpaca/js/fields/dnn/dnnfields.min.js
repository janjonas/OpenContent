(function(n){function r(t,i){var r="";return t&&t.address_components&&n.each(t.address_components,function(t,u){n.each(u.types,function(n,t){if(t==i){r=u.long_name;return}});r!=""}),r}function u(t){var i="";return t&&t.address_components&&n.each(t.address_components,function(t,r){n.each(r.types,function(n,t){if(t=="country"){i=r.short_name;return}});i!=""}),i}function f(n){for(n=n.toUpperCase(),index=0;index<t.length;++index)if(t[index].iso2===n)return t[index].iso3.toLowerCase();return""}function e(n){for(n=n.toUpperCase(),index=0;index<t.length;++index)if(t[index].iso3===n)return t[index].countryName;return""}var i=n.alpaca,t;i.Fields.AddressField=i.Fields.ObjectField.extend({getFieldType:function(){return"address"},setup:function(){this.base();this.data===undefined&&(this.data={});this.schema={title:"Address",type:"object",properties:{search:{title:"Search",type:"string"},street:{title:"Street",type:"string"},number:{title:"House Number",type:"string"},city:{title:"City",type:"string"},state:{title:"State",type:"string","enum":["AL","AK","AS","AZ","AR","CA","CO","CT","DE","DC","FM","FL","GA","GU","HI","ID","IL","IN","IA","KS","KY","LA","ME","MH","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","MP","OH","OK","OR","PW","PA","PR","RI","SC","SD","TN","TX","UT","VT","VI","VA","WA","WV","WI","WY"]},postalcode:{title:"Postal Code",type:"string"},country:{title:"Country",type:"string"},latitude:{title:"Latitude",type:"number"},longitude:{title:"Longitude",type:"number"}}};i.merge(this.options,{fields:{search:{fieldClass:"googlesearch"},street:{fieldClass:"street"},number:{fieldClass:"number"},city:{fieldClass:"city"},postalcode:{fieldClass:"postalcode"},state:{optionLabels:["ALABAMA","ALASKA","AMERICANSAMOA","ARIZONA","ARKANSAS","CALIFORNIA","COLORADO","CONNECTICUT","DELAWARE","DISTRICTOFCOLUMBIA","FEDERATEDSTATESOFMICRONESIA","FLORIDA","GEORGIA","GUAM","HAWAII","IDAHO","ILLINOIS","INDIANA","IOWA","KANSAS","KENTUCKY","LOUISIANA","MAINE","MARSHALLISLANDS","MARYLAND","MASSACHUSETTS","MICHIGAN","MINNESOTA","MISSISSIPPI","MISSOURI","MONTANA","NEBRASKA","NEVADA","NEWHAMPSHIRE","NEWJERSEY","NEWMEXICO","NEWYORK","NORTHCAROLINA","NORTHDAKOTA","NORTHERNMARIANAISLANDS","OHIO","OKLAHOMA","OREGON","PALAU","PENNSYLVANIA","PUERTORICO","RHODEISLAND","SOUTHCAROLINA","SOUTHDAKOTA","TENNESSEE","TEXAS","UTAH","VERMONT","VIRGINISLANDS","VIRGINIA","WASHINGTON","WESTVIRGINIA","WISCONSIN","WYOMING"],fieldClass:"state",hidden:!0},country:{type:"country",fieldClass:"country"},latitude:{fieldClass:"lat"},longitude:{fieldClass:"lng"}}});i.isEmpty(this.options.addressValidation)&&(this.options.addressValidation=!0)},isContainer:function(){return!1},getAddress:function(){var n=this.getValue(),t;return this.view.type==="view"&&(n=this.data),t="",n&&(n.street&&(t+=n.street+" "),n.number&&(t+=n.number+" "),n.city&&(t+=n.city+" "),n.state&&(t+=n.state+" "),n.postalcode&&(t+=n.postalcode+" "),n.country&&(t+=e(n.country))),t},afterRenderContainer:function(t,i){var e=this;this.base(t,function(){var t=e.getContainerEl(),o,s,h;n(t).addClass("alpaca-addressfield");e.options.addressValidation&&!e.isDisplayOnly()&&(n('<div style="clear:both;"><\/div>').appendTo(t),o=n('<a href="#" class="alpaca-form-button">Geocode Address<\/a>').appendTo(t),o.button&&o.button({text:!0}),o.click(function(){if(google&&google.maps){var i=new google.maps.Geocoder,r=e.getAddress();i&&i.geocode({address:r},function(i,r){r===google.maps.GeocoderStatus.OK?(n(".alpaca-field.lng input.alpaca-control",t).val(i[0].geometry.location.lng()),n(".alpaca-field.lat input.alpaca-control",t).val(i[0].geometry.location.lat())):e.displayMessage("Geocoding failed: "+r)})}else e.displayMessage("Google Map API is not installed.");return!1}).wrap("<small/>"),s=n(".alpaca-field.googlesearch input.alpaca-control",t)[0],s&&typeof google!="undefined"&&google&&google.maps&&(h=new google.maps.places.SearchBox(s),google.maps.event.addListener(h,"places_changed",function(){var e=h.getPlaces(),i;e.length!=0&&(i=e[0],n(".alpaca-field.postalcode input.alpaca-control",t).val(r(i,"postal_code")),n(".alpaca-field.city input.alpaca-control",t).val(r(i,"locality")),n(".alpaca-field.street input.alpaca-control",t).val(r(i,"route")),n(".alpaca-field.number input.alpaca-control",t).val(r(i,"street_number")),n(".alpaca-field.country select.alpaca-control",t).val(f(u(i,"country"))),n(".alpaca-field.lng input.alpaca-control",t).val(i.geometry.location.lng()),n(".alpaca-field.lat input.alpaca-control",t).val(i.geometry.location.lat()),s.value="")}),google.maps.event.addDomListener(s,"keydown",function(n){n.keyCode==13&&n.preventDefault()})),e.options.showMapOnLoad&&o.click());i()})},getType:function(){return"any"},getTitle:function(){return"Address"},getDescription:function(){return"Address with Street, City, State, Postal code and Country. Also comes with support for Google map."},getSchemaOfOptions:function(){return i.merge(this.base(),{properties:{validateAddress:{title:"Address Validation",description:"Enable address validation if true",type:"boolean","default":!0},showMapOnLoad:{title:"Whether to show the map when first loaded",type:"boolean"}}})},getOptionsForOptions:function(){return i.merge(this.base(),{fields:{validateAddress:{helper:"Address validation if checked",rightLabel:"Enable Google Map for address validation?",type:"checkbox"}}})}});t=[{countryName:"Afghanistan",iso2:"AF",iso3:"AFG",phoneCode:"93"},{countryName:"Albania",iso2:"AL",iso3:"ALB",phoneCode:"355"},{countryName:"Algeria",iso2:"DZ",iso3:"DZA",phoneCode:"213"},{countryName:"American Samoa",iso2:"AS",iso3:"ASM",phoneCode:"1 684"},{countryName:"Andorra",iso2:"AD",iso3:"AND",phoneCode:"376"},{countryName:"Angola",iso2:"AO",iso3:"AGO",phoneCode:"244"},{countryName:"Anguilla",iso2:"AI",iso3:"AIA",phoneCode:"1 264"},{countryName:"Antarctica",iso2:"AQ",iso3:"ATA",phoneCode:"672"},{countryName:"Antigua and Barbuda",iso2:"AG",iso3:"ATG",phoneCode:"1 268"},{countryName:"Argentina",iso2:"AR",iso3:"ARG",phoneCode:"54"},{countryName:"Armenia",iso2:"AM",iso3:"ARM",phoneCode:"374"},{countryName:"Aruba",iso2:"AW",iso3:"ABW",phoneCode:"297"},{countryName:"Australia",iso2:"AU",iso3:"AUS",phoneCode:"61"},{countryName:"Austria",iso2:"AT",iso3:"AUT",phoneCode:"43"},{countryName:"Azerbaijan",iso2:"AZ",iso3:"AZE",phoneCode:"994"},{countryName:"Bahamas",iso2:"BS",iso3:"BHS",phoneCode:"1 242"},{countryName:"Bahrain",iso2:"BH",iso3:"BHR",phoneCode:"973"},{countryName:"Bangladesh",iso2:"BD",iso3:"BGD",phoneCode:"880"},{countryName:"Barbados",iso2:"BB",iso3:"BRB",phoneCode:"1 246"},{countryName:"Belarus",iso2:"BY",iso3:"BLR",phoneCode:"375"},{countryName:"Belgium",iso2:"BE",iso3:"BEL",phoneCode:"32"},{countryName:"Belize",iso2:"BZ",iso3:"BLZ",phoneCode:"501"},{countryName:"Benin",iso2:"BJ",iso3:"BEN",phoneCode:"229"},{countryName:"Bermuda",iso2:"BM",iso3:"BMU",phoneCode:"1 441"},{countryName:"Bhutan",iso2:"BT",iso3:"BTN",phoneCode:"975"},{countryName:"Bolivia",iso2:"BO",iso3:"BOL",phoneCode:"591"},{countryName:"Bosnia and Herzegovina",iso2:"BA",iso3:"BIH",phoneCode:"387"},{countryName:"Botswana",iso2:"BW",iso3:"BWA",phoneCode:"267"},{countryName:"Brazil",iso2:"BR",iso3:"BRA",phoneCode:"55"},{countryName:"British Indian Ocean Territory",iso2:"IO",iso3:"IOT",phoneCode:""},{countryName:"British Virgin Islands",iso2:"VG",iso3:"VGB",phoneCode:"1 284"},{countryName:"Brunei",iso2:"BN",iso3:"BRN",phoneCode:"673"},{countryName:"Bulgaria",iso2:"BG",iso3:"BGR",phoneCode:"359"},{countryName:"Burkina Faso",iso2:"BF",iso3:"BFA",phoneCode:"226"},{countryName:"Burma (Myanmar)",iso2:"MM",iso3:"MMR",phoneCode:"95"},{countryName:"Burundi",iso2:"BI",iso3:"BDI",phoneCode:"257"},{countryName:"Cambodia",iso2:"KH",iso3:"KHM",phoneCode:"855"},{countryName:"Cameroon",iso2:"CM",iso3:"CMR",phoneCode:"237"},{countryName:"Canada",iso2:"CA",iso3:"CAN",phoneCode:"1"},{countryName:"Cape Verde",iso2:"CV",iso3:"CPV",phoneCode:"238"},{countryName:"Cayman Islands",iso2:"KY",iso3:"CYM",phoneCode:"1 345"},{countryName:"Central African Republic",iso2:"CF",iso3:"CAF",phoneCode:"236"},{countryName:"Chad",iso2:"TD",iso3:"TCD",phoneCode:"235"},{countryName:"Chile",iso2:"CL",iso3:"CHL",phoneCode:"56"},{countryName:"China",iso2:"CN",iso3:"CHN",phoneCode:"86"},{countryName:"Christmas Island",iso2:"CX",iso3:"CXR",phoneCode:"61"},{countryName:"Cocos (Keeling) Islands",iso2:"CC",iso3:"CCK",phoneCode:"61"},{countryName:"Colombia",iso2:"CO",iso3:"COL",phoneCode:"57"},{countryName:"Comoros",iso2:"KM",iso3:"COM",phoneCode:"269"},{countryName:"Cook Islands",iso2:"CK",iso3:"COK",phoneCode:"682"},{countryName:"Costa Rica",iso2:"CR",iso3:"CRC",phoneCode:"506"},{countryName:"Croatia",iso2:"HR",iso3:"HRV",phoneCode:"385"},{countryName:"Cuba",iso2:"CU",iso3:"CUB",phoneCode:"53"},{countryName:"Cyprus",iso2:"CY",iso3:"CYP",phoneCode:"357"},{countryName:"Czech Republic",iso2:"CZ",iso3:"CZE",phoneCode:"420"},{countryName:"Democratic Republic of the Congo",iso2:"CD",iso3:"COD",phoneCode:"243"},{countryName:"Denmark",iso2:"DK",iso3:"DNK",phoneCode:"45"},{countryName:"Djibouti",iso2:"DJ",iso3:"DJI",phoneCode:"253"},{countryName:"Dominica",iso2:"DM",iso3:"DMA",phoneCode:"1 767"},{countryName:"Dominican Republic",iso2:"DO",iso3:"DOM",phoneCode:"1 809"},{countryName:"Ecuador",iso2:"EC",iso3:"ECU",phoneCode:"593"},{countryName:"Egypt",iso2:"EG",iso3:"EGY",phoneCode:"20"},{countryName:"El Salvador",iso2:"SV",iso3:"SLV",phoneCode:"503"},{countryName:"Equatorial Guinea",iso2:"GQ",iso3:"GNQ",phoneCode:"240"},{countryName:"Eritrea",iso2:"ER",iso3:"ERI",phoneCode:"291"},{countryName:"Estonia",iso2:"EE",iso3:"EST",phoneCode:"372"},{countryName:"Ethiopia",iso2:"ET",iso3:"ETH",phoneCode:"251"},{countryName:"Falkland Islands",iso2:"FK",iso3:"FLK",phoneCode:"500"},{countryName:"Faroe Islands",iso2:"FO",iso3:"FRO",phoneCode:"298"},{countryName:"Fiji",iso2:"FJ",iso3:"FJI",phoneCode:"679"},{countryName:"Finland",iso2:"FI",iso3:"FIN",phoneCode:"358"},{countryName:"France",iso2:"FR",iso3:"FRA",phoneCode:"33"},{countryName:"French Polynesia",iso2:"PF",iso3:"PYF",phoneCode:"689"},{countryName:"Gabon",iso2:"GA",iso3:"GAB",phoneCode:"241"},{countryName:"Gambia",iso2:"GM",iso3:"GMB",phoneCode:"220"},{countryName:"Gaza Strip",iso2:"",iso3:"",phoneCode:"970"},{countryName:"Georgia",iso2:"GE",iso3:"GEO",phoneCode:"995"},{countryName:"Germany",iso2:"DE",iso3:"DEU",phoneCode:"49"},{countryName:"Ghana",iso2:"GH",iso3:"GHA",phoneCode:"233"},{countryName:"Gibraltar",iso2:"GI",iso3:"GIB",phoneCode:"350"},{countryName:"Greece",iso2:"GR",iso3:"GRC",phoneCode:"30"},{countryName:"Greenland",iso2:"GL",iso3:"GRL",phoneCode:"299"},{countryName:"Grenada",iso2:"GD",iso3:"GRD",phoneCode:"1 473"},{countryName:"Guam",iso2:"GU",iso3:"GUM",phoneCode:"1 671"},{countryName:"Guatemala",iso2:"GT",iso3:"GTM",phoneCode:"502"},{countryName:"Guinea",iso2:"GN",iso3:"GIN",phoneCode:"224"},{countryName:"Guinea-Bissau",iso2:"GW",iso3:"GNB",phoneCode:"245"},{countryName:"Guyana",iso2:"GY",iso3:"GUY",phoneCode:"592"},{countryName:"Haiti",iso2:"HT",iso3:"HTI",phoneCode:"509"},{countryName:"Holy See (Vatican City)",iso2:"VA",iso3:"VAT",phoneCode:"39"},{countryName:"Honduras",iso2:"HN",iso3:"HND",phoneCode:"504"},{countryName:"Hong Kong",iso2:"HK",iso3:"HKG",phoneCode:"852"},{countryName:"Hungary",iso2:"HU",iso3:"HUN",phoneCode:"36"},{countryName:"Iceland",iso2:"IS",iso3:"IS",phoneCode:"354"},{countryName:"India",iso2:"IN",iso3:"IND",phoneCode:"91"},{countryName:"Indonesia",iso2:"ID",iso3:"IDN",phoneCode:"62"},{countryName:"Iran",iso2:"IR",iso3:"IRN",phoneCode:"98"},{countryName:"Iraq",iso2:"IQ",iso3:"IRQ",phoneCode:"964"},{countryName:"Ireland",iso2:"IE",iso3:"IRL",phoneCode:"353"},{countryName:"Isle of Man",iso2:"IM",iso3:"IMN",phoneCode:"44"},{countryName:"Israel",iso2:"IL",iso3:"ISR",phoneCode:"972"},{countryName:"Italy",iso2:"IT",iso3:"ITA",phoneCode:"39"},{countryName:"Ivory Coast",iso2:"CI",iso3:"CIV",phoneCode:"225"},{countryName:"Jamaica",iso2:"JM",iso3:"JAM",phoneCode:"1 876"},{countryName:"Japan",iso2:"JP",iso3:"JPN",phoneCode:"81"},{countryName:"Jersey",iso2:"JE",iso3:"JEY",phoneCode:""},{countryName:"Jordan",iso2:"JO",iso3:"JOR",phoneCode:"962"},{countryName:"Kazakhstan",iso2:"KZ",iso3:"KAZ",phoneCode:"7"},{countryName:"Kenya",iso2:"KE",iso3:"KEN",phoneCode:"254"},{countryName:"Kiribati",iso2:"KI",iso3:"KIR",phoneCode:"686"},{countryName:"Kosovo",iso2:"",iso3:"",phoneCode:"381"},{countryName:"Kuwait",iso2:"KW",iso3:"KWT",phoneCode:"965"},{countryName:"Kyrgyzstan",iso2:"KG",iso3:"KGZ",phoneCode:"996"},{countryName:"Laos",iso2:"LA",iso3:"LAO",phoneCode:"856"},{countryName:"Latvia",iso2:"LV",iso3:"LVA",phoneCode:"371"},{countryName:"Lebanon",iso2:"LB",iso3:"LBN",phoneCode:"961"},{countryName:"Lesotho",iso2:"LS",iso3:"LSO",phoneCode:"266"},{countryName:"Liberia",iso2:"LR",iso3:"LBR",phoneCode:"231"},{countryName:"Libya",iso2:"LY",iso3:"LBY",phoneCode:"218"},{countryName:"Liechtenstein",iso2:"LI",iso3:"LIE",phoneCode:"423"},{countryName:"Lithuania",iso2:"LT",iso3:"LTU",phoneCode:"370"},{countryName:"Luxembourg",iso2:"LU",iso3:"LUX",phoneCode:"352"},{countryName:"Macau",iso2:"MO",iso3:"MAC",phoneCode:"853"},{countryName:"Macedonia",iso2:"MK",iso3:"MKD",phoneCode:"389"},{countryName:"Madagascar",iso2:"MG",iso3:"MDG",phoneCode:"261"},{countryName:"Malawi",iso2:"MW",iso3:"MWI",phoneCode:"265"},{countryName:"Malaysia",iso2:"MY",iso3:"MYS",phoneCode:"60"},{countryName:"Maldives",iso2:"MV",iso3:"MDV",phoneCode:"960"},{countryName:"Mali",iso2:"ML",iso3:"MLI",phoneCode:"223"},{countryName:"Malta",iso2:"MT",iso3:"MLT",phoneCode:"356"},{countryName:"Marshall Islands",iso2:"MH",iso3:"MHL",phoneCode:"692"},{countryName:"Mauritania",iso2:"MR",iso3:"MRT",phoneCode:"222"},{countryName:"Mauritius",iso2:"MU",iso3:"MUS",phoneCode:"230"},{countryName:"Mayotte",iso2:"YT",iso3:"MYT",phoneCode:"262"},{countryName:"Mexico",iso2:"MX",iso3:"MEX",phoneCode:"52"},{countryName:"Micronesia",iso2:"FM",iso3:"FSM",phoneCode:"691"},{countryName:"Moldova",iso2:"MD",iso3:"MDA",phoneCode:"373"},{countryName:"Monaco",iso2:"MC",iso3:"MCO",phoneCode:"377"},{countryName:"Mongolia",iso2:"MN",iso3:"MNG",phoneCode:"976"},{countryName:"Montenegro",iso2:"ME",iso3:"MNE",phoneCode:"382"},{countryName:"Montserrat",iso2:"MS",iso3:"MSR",phoneCode:"1 664"},{countryName:"Morocco",iso2:"MA",iso3:"MAR",phoneCode:"212"},{countryName:"Mozambique",iso2:"MZ",iso3:"MOZ",phoneCode:"258"},{countryName:"Namibia",iso2:"NA",iso3:"NAM",phoneCode:"264"},{countryName:"Nauru",iso2:"NR",iso3:"NRU",phoneCode:"674"},{countryName:"Nepal",iso2:"NP",iso3:"NPL",phoneCode:"977"},{countryName:"Netherlands",iso2:"NL",iso3:"NLD",phoneCode:"31"},{countryName:"Netherlands Antilles",iso2:"AN",iso3:"ANT",phoneCode:"599"},{countryName:"New Caledonia",iso2:"NC",iso3:"NCL",phoneCode:"687"},{countryName:"New Zealand",iso2:"NZ",iso3:"NZL",phoneCode:"64"},{countryName:"Nicaragua",iso2:"NI",iso3:"NIC",phoneCode:"505"},{countryName:"Niger",iso2:"NE",iso3:"NER",phoneCode:"227"},{countryName:"Nigeria",iso2:"NG",iso3:"NGA",phoneCode:"234"},{countryName:"Niue",iso2:"NU",iso3:"NIU",phoneCode:"683"},{countryName:"Norfolk Island",iso2:"",iso3:"NFK",phoneCode:"672"},{countryName:"North Korea",iso2:"KP",iso3:"PRK",phoneCode:"850"},{countryName:"Northern Mariana Islands",iso2:"MP",iso3:"MNP",phoneCode:"1 670"},{countryName:"Norway",iso2:"NO",iso3:"NOR",phoneCode:"47"},{countryName:"Oman",iso2:"OM",iso3:"OMN",phoneCode:"968"},{countryName:"Pakistan",iso2:"PK",iso3:"PAK",phoneCode:"92"},{countryName:"Palau",iso2:"PW",iso3:"PLW",phoneCode:"680"},{countryName:"Panama",iso2:"PA",iso3:"PAN",phoneCode:"507"},{countryName:"Papua New Guinea",iso2:"PG",iso3:"PNG",phoneCode:"675"},{countryName:"Paraguay",iso2:"PY",iso3:"PRY",phoneCode:"595"},{countryName:"Peru",iso2:"PE",iso3:"PER",phoneCode:"51"},{countryName:"Philippines",iso2:"PH",iso3:"PHL",phoneCode:"63"},{countryName:"Pitcairn Islands",iso2:"PN",iso3:"PCN",phoneCode:"870"},{countryName:"Poland",iso2:"PL",iso3:"POL",phoneCode:"48"},{countryName:"Portugal",iso2:"PT",iso3:"PRT",phoneCode:"351"},{countryName:"Puerto Rico",iso2:"PR",iso3:"PRI",phoneCode:"1"},{countryName:"Qatar",iso2:"QA",iso3:"QAT",phoneCode:"974"},{countryName:"Republic of the Congo",iso2:"CG",iso3:"COG",phoneCode:"242"},{countryName:"Romania",iso2:"RO",iso3:"ROU",phoneCode:"40"},{countryName:"Russia",iso2:"RU",iso3:"RUS",phoneCode:"7"},{countryName:"Rwanda",iso2:"RW",iso3:"RWA",phoneCode:"250"},{countryName:"Saint Barthelemy",iso2:"BL",iso3:"BLM",phoneCode:"590"},{countryName:"Saint Helena",iso2:"SH",iso3:"SHN",phoneCode:"290"},{countryName:"Saint Kitts and Nevis",iso2:"KN",iso3:"KNA",phoneCode:"1 869"},{countryName:"Saint Lucia",iso2:"LC",iso3:"LCA",phoneCode:"1 758"},{countryName:"Saint Martin",iso2:"MF",iso3:"MAF",phoneCode:"1 599"},{countryName:"Saint Pierre and Miquelon",iso2:"PM",iso3:"SPM",phoneCode:"508"},{countryName:"Saint Vincent and the Grenadines",iso2:"VC",iso3:"VCT",phoneCode:"1 784"},{countryName:"Samoa",iso2:"WS",iso3:"WSM",phoneCode:"685"},{countryName:"San Marino",iso2:"SM",iso3:"SMR",phoneCode:"378"},{countryName:"Sao Tome and Principe",iso2:"ST",iso3:"STP",phoneCode:"239"},{countryName:"Saudi Arabia",iso2:"SA",iso3:"SAU",phoneCode:"966"},{countryName:"Senegal",iso2:"SN",iso3:"SEN",phoneCode:"221"},{countryName:"Serbia",iso2:"RS",iso3:"SRB",phoneCode:"381"},{countryName:"Seychelles",iso2:"SC",iso3:"SYC",phoneCode:"248"},{countryName:"Sierra Leone",iso2:"SL",iso3:"SLE",phoneCode:"232"},{countryName:"Singapore",iso2:"SG",iso3:"SGP",phoneCode:"65"},{countryName:"Slovakia",iso2:"SK",iso3:"SVK",phoneCode:"421"},{countryName:"Slovenia",iso2:"SI",iso3:"SVN",phoneCode:"386"},{countryName:"Solomon Islands",iso2:"SB",iso3:"SLB",phoneCode:"677"},{countryName:"Somalia",iso2:"SO",iso3:"SOM",phoneCode:"252"},{countryName:"South Africa",iso2:"ZA",iso3:"ZAF",phoneCode:"27"},{countryName:"South Korea",iso2:"KR",iso3:"KOR",phoneCode:"82"},{countryName:"Spain",iso2:"ES",iso3:"ESP",phoneCode:"34"},{countryName:"Sri Lanka",iso2:"LK",iso3:"LKA",phoneCode:"94"},{countryName:"Sudan",iso2:"SD",iso3:"SDN",phoneCode:"249"},{countryName:"Suriname",iso2:"SR",iso3:"SUR",phoneCode:"597"},{countryName:"Svalbard",iso2:"SJ",iso3:"SJM",phoneCode:""},{countryName:"Swaziland",iso2:"SZ",iso3:"SWZ",phoneCode:"268"},{countryName:"Sweden",iso2:"SE",iso3:"SWE",phoneCode:"46"},{countryName:"Switzerland",iso2:"CH",iso3:"CHE",phoneCode:"41"},{countryName:"Syria",iso2:"SY",iso3:"SYR",phoneCode:"963"},{countryName:"Taiwan",iso2:"TW",iso3:"TWN",phoneCode:"886"},{countryName:"Tajikistan",iso2:"TJ",iso3:"TJK",phoneCode:"992"},{countryName:"Tanzania",iso2:"TZ",iso3:"TZA",phoneCode:"255"},{countryName:"Thailand",iso2:"TH",iso3:"THA",phoneCode:"66"},{countryName:"Timor-Leste",iso2:"TL",iso3:"TLS",phoneCode:"670"},{countryName:"Togo",iso2:"TG",iso3:"TGO",phoneCode:"228"},{countryName:"Tokelau",iso2:"TK",iso3:"TKL",phoneCode:"690"},{countryName:"Tonga",iso2:"TO",iso3:"TON",phoneCode:"676"},{countryName:"Trinidad and Tobago",iso2:"TT",iso3:"TTO",phoneCode:"1 868"},{countryName:"Tunisia",iso2:"TN",iso3:"TUN",phoneCode:"216"},{countryName:"Turkey",iso2:"TR",iso3:"TUR",phoneCode:"90"},{countryName:"Turkmenistan",iso2:"TM",iso3:"TKM",phoneCode:"993"},{countryName:"Turks and Caicos Islands",iso2:"TC",iso3:"TCA",phoneCode:"1 649"},{countryName:"Tuvalu",iso2:"TV",iso3:"TUV",phoneCode:"688"},{countryName:"Uganda",iso2:"UG",iso3:"UGA",phoneCode:"256"},{countryName:"Ukraine",iso2:"UA",iso3:"UKR",phoneCode:"380"},{countryName:"United Arab Emirates",iso2:"AE",iso3:"ARE",phoneCode:"971"},{countryName:"United Kingdom",iso2:"GB",iso3:"GBR",phoneCode:"44"},{countryName:"United States",iso2:"US",iso3:"USA",phoneCode:"1"},{countryName:"Uruguay",iso2:"UY",iso3:"URY",phoneCode:"598"},{countryName:"US Virgin Islands",iso2:"VI",iso3:"VIR",phoneCode:"1 340"},{countryName:"Uzbekistan",iso2:"UZ",iso3:"UZB",phoneCode:"998"},{countryName:"Vanuatu",iso2:"VU",iso3:"VUT",phoneCode:"678"},{countryName:"Venezuela",iso2:"VE",iso3:"VEN",phoneCode:"58"},{countryName:"Vietnam",iso2:"VN",iso3:"VNM",phoneCode:"84"},{countryName:"Wallis and Futuna",iso2:"WF",iso3:"WLF",phoneCode:"681"},{countryName:"West Bank",iso2:"",iso3:"",phoneCode:"970"},{countryName:"Western Sahara",iso2:"EH",iso3:"ESH",phoneCode:""},{countryName:"Yemen",iso2:"YE",iso3:"YEM",phoneCode:"967"},{countryName:"Zambia",iso2:"ZM",iso3:"ZMB",phoneCode:"260"},{countryName:"Zimbabwe",iso2:"ZW",iso3:"ZWE",phoneCode:"263"}];i.registerFieldClass("address",i.Fields.AddressField)})(jQuery),function(n){var t=n.alpaca;t.Fields.CKEditorField=t.Fields.TextAreaField.extend({getFieldType:function(){return"ckeditor"},setup:function(){this.data||(this.data="");this.base();typeof this.options.ckeditor=="undefined"&&(this.options.ckeditor={});typeof this.options.configset=="undefined"&&(this.options.configset="")},afterRenderControl:function(t,i){var r=this;this.base(t,function(){!r.isDisplayOnly()&&r.control&&typeof CKEDITOR!="undefined"&&setTimeout(function(){var t={toolbar:[{name:"basicstyles",groups:["basicstyles","cleanup"],items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"styles",items:["Styles","Format"]},{name:"paragraph",groups:["list","indent","blocks","align"],items:["NumberedList","BulletedList","-","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock",]},{name:"links",items:["Link","Unlink"]},{name:"document",groups:["mode","document","doctools"],items:["Source"]},],format_tags:"p;h1;h2;h3;pre",removeDialogTabs:"image:advanced;link:advanced",removePlugins:"elementspath,resize",extraPlugins:"dnnpages",height:150,customConfig:"",stylesSet:[]},i;r.options.configset=="basic"?t={toolbar:[{name:"basicstyles",groups:["basicstyles","cleanup"],items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"styles",items:["Styles","Format"]},{name:"paragraph",groups:["list","indent","blocks","align"],items:["NumberedList","BulletedList","-","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock",]},{name:"links",items:["Link","Unlink"]},{name:"document",groups:["mode","document","doctools"],items:["Maximize","Source"]},],format_tags:"p;h1;h2;h3;pre",removeDialogTabs:"image:advanced;link:advanced",removePlugins:"elementspath,resize",extraPlugins:"dnnpages",height:150,customConfig:"",stylesSet:[]}:r.options.configset=="standard"?t={toolbar:[{name:"basicstyles",groups:["basicstyles","cleanup"],items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"styles",items:["Styles","Format"]},{name:"paragraph",groups:["list","indent","blocks","align"],items:["NumberedList","BulletedList","-","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock",]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["Table","Smiley","SpecialChar","Iframe"]},{name:"document",groups:["mode","document","doctools"],items:["Maximize","ShowBlocks","Source"]}],format_tags:"p;h1;h2;h3;pre;div",extraAllowedContent:"table tr th td caption[*](*);div span(*);",removeDialogTabs:"image:advanced;link:advanced",removePlugins:"elementspath,resize",extraPlugins:"dnnpages",height:150,customConfig:"",stylesSet:[]}:r.options.configset=="full"&&(t={toolbar:[{name:"document",items:["Save","NewPage","DocProps","Preview","Print","-","Templates"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Find","Replace","-","SelectAll","-","SpellChecker","Scayt"]},{name:"forms",items:["Form","Checkbox","Radio","TextField","Textarea","Select","Button","ImageButton","HiddenField"]},"/",{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","CreateDiv","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["Image","Flash","Table","HorizontalRule","Smiley","SpecialChar","PageBreak","Iframe"]},"/",{name:"styles",items:["Styles","Format","Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize","ShowBlocks","-","About","-","Source"]}],format_tags:"p;h1;h2;h3;pre;div",allowedContentRules:!0,removeDialogTabs:"image:advanced;link:advanced",removePlugins:"elementspath,resize",extraPlugins:"dnnpages",height:150,customConfig:"",stylesSet:[]});i=n.extend({},t,r.options.ckeditor);r.editor=CKEDITOR.replace(n(r.control)[0],i)},1600);n(r.control).bind("destroyed",function(){r.editor&&(r.editor.removeAllListeners(),r.editor.destroy(!1),r.editor=null)});i()})},initControlEvents:function(){var n=this;setTimeout(function(){n.editor.on("click",function(t){n.onClick.call(n,t);n.trigger("click",t)});n.editor.on("change",function(t){n.onChange();n.triggerWithPropagation("change",t)});n.editor.on("blur",function(t){n.onBlur();n.trigger("blur",t)});n.editor.on("focus",function(t){n.onFocus.call(n,t);n.trigger("focus",t)});n.editor.on("key",function(t){n.onKeyPress.call(n,t);n.trigger("keypress",t)})},1800)},setValue:function(n){var t=this;this.base(n);t.editor&&t.editor.setData(n)},getValue:function(){var n=this,t=this.base();return n.editor&&(t=n.editor.getData()),t},destroy:function(){this.editor&&(this.editor.destroy(),this.editor=null);this.base()},getTitle:function(){return"CK Editor"},getDescription:function(){return"Provides an instance of a CK Editor control for use in editing HTML."},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{ckeditor:{title:"CK Editor options",description:"Use this entry to provide configuration options to the underlying CKEditor plugin.",type:"any"}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{ckeditor:{type:"any"}}})}});t.registerFieldClass("ckeditor",t.Fields.CKEditorField)}(jQuery),function(n){var t=n.alpaca;t.Fields.DateField=t.Fields.TextField.extend({getFieldType:function(){return"date"},getDefaultFormat:function(){return"MM/DD/YYYY"},getDefaultExtraFormats:function(){return[]},setup:function(){var n=this,t;this.base();n.options.picker||(n.options.picker={});typeof n.options.picker.useCurrent=="undefined"&&(n.options.picker.useCurrent=!1);!n.options.dateFormat;n.options.picker.format||(n.options.picker.format=n.options.dateFormat);n.options.picker.extraFormats||(t=n.getDefaultExtraFormats(),t&&(n.options.picker.extraFormats=t))},afterRenderControl:function(t,i){var r=this;this.base(t,function(){r.view.type!=="display"&&n.fn.datetimepicker&&(r.getControlEl().datetimepicker(r.options.picker),r.picker=r.getControlEl().data("DateTimePicker"));i()})},getDate:function(){var n=this,t=null;try{t=n.picker?n.picker.date()?n.picker.date()._d:null:new Date(this.getValue())}catch(i){console.error(i)}return t},date:function(){return this.getDate()},onChange:function(){this.base();this.refreshValidationState()},isAutoFocusable:function(){return!1},handleValidate:function(){var r=this.base(),n=this.validation,i=this._validateDateFormat();return n.invalidDate={message:i?"":t.substituteTokens(this.getMessage("invalidDate"),[this.options.dateFormat]),status:i},r&&n.invalidDate.status},_validateDateFormat:function(){var n=this,r=!0,u,i,t;if(n.options.dateFormat&&(u=n.getValue(),u||n.isRequired())){if(i=[],i.push(n.options.dateFormat),n.options.picker&&n.options.picker.extraFormats)for(t=0;t<n.options.picker.extraFormats.length;t++)i.push(n.options.picker.extraFormats[t]);for(t=0;t<i.length;t++)r=r||moment(u,n.options.dateFormat,!0).isValid()}return r},setValue:function(n){var t=this;this.base(n);this.picker&&(t.options.dateFormat?moment(n,t.options.dateFormat,!0).isValid()&&this.picker.date(n):moment(n).isValid()&&this.picker.date(moment(n)))},getValue:function(){var n=this,t=null;try{t=n.picker?n.picker.date()?n.picker.date().format():null:this.base()}catch(i){console.error(i)}return t},destroy:function(){this.base();this.picker=null},getTitle:function(){return"Date Field"},getDescription:function(){return"Date Field"},getSchemaOfSchema:function(){return t.merge(this.base(),{properties:{format:{title:"Format",description:"Property data format",type:"string","default":"date","enum":["date"],readonly:!0}}})},getOptionsForSchema:function(){return t.merge(this.base(),{fields:{format:{type:"text"}}})},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{dateFormat:{title:"Date Format",description:"Date format (using moment.js format)",type:"string"},picker:{title:"DatetimePicker options",description:"Options that are supported by the <a href='http://eonasdan.github.io/bootstrap-datetimepicker/'>Bootstrap DateTime Picker<\/a>.",type:"any"}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{dateFormat:{type:"text"},picker:{type:"any"}}})}});t.registerMessages({invalidDate:"Invalid date for format {0}"});t.registerFieldClass("date",t.Fields.DateField);t.registerDefaultFormatFieldMapping("date","date")}(jQuery),function(n){var t=n.alpaca;t.Fields.FileField=t.Fields.TextField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.sf=f.servicesFramework},getFieldType:function(){return"file"},setup:function(){this.options.uploadfolder||(this.options.uploadfolder="");this.base()},getTitle:function(){return"File Field"},getDescription:function(){return"File Field."},getControlEl:function(){return n(this.control.get(0)).find("input[type=text]#"+this.id)},setValue:function(n){var i=this.getControlEl();i&&i.length>0&&(t.isEmpty(n)?i.val(""):i.val(n));this.updateMaxLengthIndicator()},getValue:function(){var t=null,n=this.getControlEl();return n&&n.length>0&&(t=n.val()),t},afterRenderControl:function(n,t){var i=this;this.base(n,function(){i.handlePostRender(function(){t()})})},handlePostRender:function(t){var i=this,r=this.getControlEl();n(this.control.get(0)).find("input[type=file]").fileupload({dataType:"json",url:i.sf.getServiceRoot("OpenContent")+"FileUpload/UploadFile",maxFileSize:25e6,formData:{uploadfolder:i.options.uploadfolder},beforeSend:i.sf.setModuleHeaders,add:function(n,t){t.submit()},progress:function(n,t){if(t.context){var i=parseInt(t.loaded/t.total*100,10);t.context.find(opts.progressBarSelector).css("width",i+"%").find("span").html(i+"%")}},done:function(t,u){u.result&&n.each(u.result,function(t,u){i.setValue(u.url);n(r).change()})}}).data("loaded",!0);t()},applyTypeAhead:function(){var r=this,o,i,s,f,e,h,c,l,u;if(r.control.typeahead&&r.options.typeahead&&!t.isEmpty(r.options.typeahead)){if(o=r.options.typeahead.config,o||(o={}),i=i={},i.name||(i.name=r.getId()),s=r.options.typeahead.Folder,s||(s=""),f=f={},e={datumTokenizer:function(n){return Bloodhound.tokenizers.whitespace(n.value)},queryTokenizer:Bloodhound.tokenizers.whitespace},e.remote={url:r.sf.getServiceRoot("OpenContent")+"DnnEntitiesAPI/Files?q=%QUERY&d="+s,ajax:{beforeSend:connector.servicesFramework.setModuleHeaders}},i.filter&&(e.remote.filter=i.filter),i.replace&&(e.remote.replace=i.replace),h=new Bloodhound(e),h.initialize(),i.source=h.ttAdapter(),i.templates={empty:"Nothing found...",suggestion:"{{name}}"},i.templates)for(c in i.templates)l=i.templates[c],typeof l=="string"&&(i.templates[c]=Handlebars.compile(l));u=this.getControlEl();n(u).typeahead(o,i);n(u).on("typeahead:autocompleted",function(t,i){r.setValue(i.value);n(u).change()});n(u).on("typeahead:selected",function(t,i){r.setValue(i.value);n(u).change()});if(f){if(f.autocompleted)n(u).on("typeahead:autocompleted",function(n,t){f.autocompleted(n,t)});if(f.selected)n(u).on("typeahead:selected",function(n,t){f.selected(n,t)})}n(u).change(function(){var t=n(this).val(),i=n(u).typeahead("val");i!==t&&n(u).typeahead("val",t)});n(r.field).find("span.twitter-typeahead").first().css("display","block");n(r.field).find("span.twitter-typeahead input.tt-input").first().css("background-color","")}}});t.registerFieldClass("file",t.Fields.FileField)}(jQuery),function(n){var t=n.alpaca;t.Fields.ImageCropperField=t.Fields.TextField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.sf=f.servicesFramework},getFieldType:function(){return"imagecropper"},setup:function(){this.options.uploadfolder||(this.options.uploadfolder="");this.options.uploadhidden||(this.options.uploadhidden=!1);this.options.cropper||(this.options.cropper={});this.options.cropper.responsive=!1;this.options.cropper.autoCropArea||(this.options.cropper.autoCropArea=1);this.base()},getTitle:function(){return"Image Cropper Field"},getDescription:function(){return"Image Cropper Field."},getControlEl:function(){return n(this.control.get(0)).find("input[type=text]#"+this.id)},setValue:function(n){var i=this.getControlEl();i&&i.length>0&&(t.isEmpty(n)?i.val(""):t.isString(n)?i.val(n):(i.val(n.url),this.setCroppedData(n.cropdata)));this.updateMaxLengthIndicator()},getValue:function(){var n=null,t=this.getControlEl();return t&&t.length>0&&(n={url:t.val()},n.cropdata=this.getCroppedData()),n},getCroppedData:function(){var f=this.getControlEl(),i={};for(var t in this.options.croppers){var e=this.options.croppers[t],r=this.id+"-"+t,u=n("#"+r);i[t]=u.data("cropdata")}return i},cropAllImages:function(t){var i=this;for(var r in this.options.croppers){var f=this.id+"-"+r,s=n("#"+f),u=this.options.croppers[r],e={x:-1,y:-1,width:u.width,height:u.height,rotate:0},o=JSON.stringify({url:t,id:r,crop:e,resize:u,cropfolder:this.options.cropfolder});n.ajax({type:"POST",url:i.sf.getServiceRoot("OpenContent")+"DnnEntitiesAPI/CropImage",contentType:"application/json; charset=utf-8",dataType:"json",async:!1,data:o,beforeSend:i.sf.setModuleHeaders}).done(function(n){var t={url:n.url,cropper:{}};i.setCroppedDataForId(f,t)}).fail(function(n,t,i){alert("Uh-oh, something broke: "+i)})}},setCroppedData:function(i){var e=this.getControlEl(),h=this.getFieldEl(),u,r,f,o;if(e&&e.length>0&&!t.isEmpty(i))for(r in this.options.croppers){var o=this.options.croppers[r],c=this.id+"-"+r,s=n("#"+c);cropdata=i[r];cropdata&&s.data("cropdata",cropdata);u||(u=s,n(u).addClass("active"),cropdata&&(f=n(h).find(".alpaca-image-display img.image"),o=f.data("cropper"),o&&f.cropper("setData",cropdata.cropper)))}},setCroppedDataForId:function(t,i){var u=this.getControlEl(),r;i&&(r=n("#"+t),r.data("cropdata",i))},getCurrentCropData:function(){var t=this.getFieldEl(),i=n(t).parent().find(".alpaca-form-tab.active");return n(i).data("cropdata")},setCurrentCropData:function(t){var i=this.getFieldEl(),r=n(i).parent().find(".alpaca-form-tab.active");n(r).data("cropdata",t)},afterRenderControl:function(n,t){var i=this;this.base(n,function(){i.handlePostRender(function(){t()})})},cropChange:function(t){var u=t.data,f=u.getCurrentCropData(),e;if(f){var r=f.cropper,o=this,i=n(this).cropper("getData",{rounded:!0});(i.x!=r.x||i.y!=r.y||i.width!=r.width||i.height!=r.height||i.rotate!=r.rotate)&&(e={url:"",cropper:i},u.setCurrentCropData(e))}},getCropppersData:function(){var n,t,i;for(n in self.options.croppers)t=self.options.croppers[n],i=self.id+"-"+n},handlePostRender:function(t){var i=this,f=this.getControlEl(),s=this.getFieldEl(),r=n('<a href="#" class="alpaca-form-button">Crop<\/a>'),e,o,u,a;r.click(function(){var u=i.getCroppedData(),e=JSON.stringify({url:f.val(),cropfolder:i.options.cropfolder,cropdata:u,croppers:i.options.croppers}),t;return n(r).css("cursor","wait"),t="CropImages",n.ajax({type:"POST",url:i.sf.getServiceRoot("OpenContent")+"DnnEntitiesAPI/"+t,contentType:"application/json; charset=utf-8",dataType:"json",data:e,beforeSend:i.sf.setModuleHeaders}).done(function(t){for(var u in i.options.croppers){var s=i.options.croppers[u],e=i.id+"-"+u,o=n("#"+e),f={url:t.cropdata[u].url,cropper:t.cropdata[u].crop};f&&o.data("cropdata",f)}setTimeout(function(){n(r).css("cursor","default")},500)}).fail(function(t,i,r){alert("Uh-oh, something broke: "+r);n(s).css("cursor","default")}),!1});for(o in i.options.croppers){var c=i.options.croppers[o],l=i.id+"-"+o,h=n('<a id="'+l+'" data-id="'+o+'" href="#" class="alpaca-form-tab" >'+o+"<\/a>").appendTo(n(f).parent());h.data("cropopt",c);h.click(function(){u.off("change.cropper");var t=n(this).data("cropdata"),f=n(this).data("cropopt");u.cropper("setAspectRatio",f.width/f.height);t?u.cropper("setData",t.cropper):u.cropper("reset");r.data("cropperButtonId",this.id);r.data("cropperId",n(this).attr("data-id"));n(this).parent().find(".alpaca-form-tab").removeClass("active");n(this).addClass("active");u.on("change.cropper",i,i.cropChange);return!1});e||(e=h,n(e).addClass("active"),r.data("cropperButtonId",n(e).attr("id")),r.data("cropperId",n(e).attr("data-id")))}u=n(s).find(".alpaca-image-display img.image");u.cropper(i.options.cropper).on("built.cropper",function(){var t=n(e).data("cropopt"),r,u;t&&n(this).cropper("setAspectRatio",t.width/t.height);r=n(e).data("cropdata");r&&n(this).cropper("setData",r.cropper);u=n(s).find(".alpaca-image-display img.image");u.on("change.cropper",i,i.cropChange)});i.options.uploadhidden?n(this.control.get(0)).find("input[type=file]").hide():n(this.control.get(0)).find("input[type=file]").fileupload({dataType:"json",url:i.sf.getServiceRoot("OpenContent")+"FileUpload/UploadFile",maxFileSize:25e6,formData:{uploadfolder:i.options.uploadfolder},beforeSend:i.sf.setModuleHeaders,add:function(n,t){t.submit()},progress:function(n,t){if(t.context){var i=parseInt(t.loaded/t.total*100,10);t.context.find(opts.progressBarSelector).css("width",i+"%").find("span").html(i+"%")}},done:function(t,i){i.result&&n.each(i.result,function(t,i){f.val(i.url);n(f).change()})}}).data("loaded",!0);n(f).change(function(){var t=n(this).val();n(s).find(".alpaca-image-display img.image").attr("src",t);u.cropper("replace",t);t&&i.cropAllImages(t)});r.appendTo(n(f).parent());i.options.manageurl&&(a=n('<a href="'+i.options.manageurl+'" target="_blank" class="alpaca-form-button">Manage files<\/a>').appendTo(n(f).parent()));t()},applyTypeAhead:function(){var u=this,o,i,s,f,e,h,c,l,r;if(u.control.typeahead&&u.options.typeahead&&!t.isEmpty(u.options.typeahead)){if(o=u.options.typeahead.config,o||(o={}),i=i={},i.name||(i.name=u.getId()),s=u.options.typeahead.Folder,s||(s=""),f=f={},e={datumTokenizer:function(n){return Bloodhound.tokenizers.whitespace(n.value)},queryTokenizer:Bloodhound.tokenizers.whitespace},e.remote={url:u.sf.getServiceRoot("OpenContent")+"DnnEntitiesAPI/Images?q=%QUERY&d="+s,ajax:{beforeSend:connector.servicesFramework.setModuleHeaders}},i.filter&&(e.remote.filter=i.filter),i.replace&&(e.remote.replace=i.replace),h=new Bloodhound(e),h.initialize(),i.source=h.ttAdapter(),i.templates={empty:"Nothing found...",suggestion:"<div style='width:20%;display:inline-block;background-color:#fff;padding:2px;'><img src='{{value}}' style='height:40px' /><\/div> {{name}}"},i.templates)for(c in i.templates)l=i.templates[c],typeof l=="string"&&(i.templates[c]=Handlebars.compile(l));r=this.getControlEl();n(r).typeahead(o,i);n(r).on("typeahead:autocompleted",function(t,i){r.val(i.value);n(r).change()});n(r).on("typeahead:selected",function(t,i){r.val(i.value);n(r).change()});if(f){if(f.autocompleted)n(r).on("typeahead:autocompleted",function(n,t){f.autocompleted(n,t)});if(f.selected)n(r).on("typeahead:selected",function(n,t){f.selected(n,t)})}n(r).change(function(){var t=n(this).val(),i=n(r).typeahead("val");i!==t&&n(r).typeahead("val",t)});n(u.field).find("span.twitter-typeahead").first().css("display","block");n(u.field).find("span.twitter-typeahead input.tt-input").first().css("background-color","")}}});t.registerFieldClass("imagecropper",t.Fields.ImageCropperField)}(jQuery),function(n){var t=n.alpaca;t.Fields.ImageField=t.Fields.TextField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.sf=f.servicesFramework},getFieldType:function(){return"image"},setup:function(){this.options.uploadfolder||(this.options.uploadfolder="");this.options.uploadhidden||(this.options.uploadhidden=!1);this.base()},getTitle:function(){return"Image Field"},getDescription:function(){return"Image Field."},getControlEl:function(){return n(this.control.get(0)).find("input[type=text]#"+this.id)},setValue:function(n){var i=this.getControlEl();i&&i.length>0&&(t.isEmpty(n)?i.val(""):i.val(n));this.updateMaxLengthIndicator()},getValue:function(){var t=null,n=this.getControlEl();return n&&n.length>0&&(t=n.val()),t},afterRenderControl:function(n,t){var i=this;this.base(n,function(){i.handlePostRender(function(){t()})})},handlePostRender:function(t){var i=this,r=this.getControlEl(),u;i.options.uploadhidden?n(this.control.get(0)).find("input[type=file]").hide():n(this.control.get(0)).find("input[type=file]").fileupload({dataType:"json",url:i.sf.getServiceRoot("OpenContent")+"FileUpload/UploadFile",maxFileSize:25e6,formData:{uploadfolder:i.options.uploadfolder},beforeSend:i.sf.setModuleHeaders,add:function(n,t){t.submit()},progress:function(n,t){if(t.context){var i=parseInt(t.loaded/t.total*100,10);t.context.find(opts.progressBarSelector).css("width",i+"%").find("span").html(i+"%")}},done:function(t,u){u.result&&n.each(u.result,function(t,u){i.setValue(u.url);n(r).change()})}}).data("loaded",!0);n(r).change(function(){var t=n(this).val();n(i.control).parent().find(".alpaca-image-display img").attr("src",t)});i.options.manageurl&&(u=n('<a href="'+i.options.manageurl+'" target="_blank" class="alpaca-form-button">Manage files<\/a>').appendTo(n(r).parent()));t()},applyTypeAhead:function(){var r=this,o,i,s,f,e,h,c,l,u;if(r.control.typeahead&&r.options.typeahead&&!t.isEmpty(r.options.typeahead)){if(o=r.options.typeahead.config,o||(o={}),i=i={},i.name||(i.name=r.getId()),s=r.options.typeahead.Folder,s||(s=""),f=f={},e={datumTokenizer:function(n){return Bloodhound.tokenizers.whitespace(n.value)},queryTokenizer:Bloodhound.tokenizers.whitespace},e.remote={url:r.sf.getServiceRoot("OpenContent")+"DnnEntitiesAPI/Images?q=%QUERY&d="+s,ajax:{beforeSend:connector.servicesFramework.setModuleHeaders}},i.filter&&(e.remote.filter=i.filter),i.replace&&(e.remote.replace=i.replace),h=new Bloodhound(e),h.initialize(),i.source=h.ttAdapter(),i.templates={empty:"Nothing found...",suggestion:"<div style='width:20%;display:inline-block;background-color:#fff;padding:2px;'><img src='{{value}}' style='height:40px' /><\/div> {{name}}"},i.templates)for(c in i.templates)l=i.templates[c],typeof l=="string"&&(i.templates[c]=Handlebars.compile(l));u=this.getControlEl();n(u).typeahead(o,i);n(u).on("typeahead:autocompleted",function(t,i){r.setValue(i.value);n(u).change()});n(u).on("typeahead:selected",function(t,i){r.setValue(i.value);n(u).change()});if(f){if(f.autocompleted)n(u).on("typeahead:autocompleted",function(n,t){f.autocompleted(n,t)});if(f.selected)n(u).on("typeahead:selected",function(n,t){f.selected(n,t)})}n(u).change(function(){var t=n(this).val(),i=n(u).typeahead("val");i!==t&&n(u).typeahead("val",t)});n(r.field).find("span.twitter-typeahead").first().css("display","block");n(r.field).find("span.twitter-typeahead input.tt-input").first().css("background-color","")}}});t.registerFieldClass("image",t.Fields.ImageField)}(jQuery),function(n){var t=n.alpaca;t.Fields.NumberField=t.Fields.TextField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.numberDecimalSeparator=f.numberDecimalSeparator},setup:function(){this.base()},getFieldType:function(){return"number"},getValue:function(){var n=this._getControlVal(!0);return typeof n=="undefined"||""==n?n:(this.numberDecimalSeparator!="."&&(n=n.replace(this.numberDecimalSeparator,".")),parseFloat(n))},setValue:function(n){var i=n;this.numberDecimalSeparator!="."&&(i=t.isEmpty(n)?"":(""+n).replace(".",this.numberDecimalSeparator));this.base(i)},handleValidate:function(){var r=this.base(),i=this.validation,n=this._validateNumber();return i.stringNotANumber={message:n?"":this.view.getMessage("stringNotANumber"),status:n},n=this._validateDivisibleBy(),i.stringDivisibleBy={message:n?"":t.substituteTokens(this.view.getMessage("stringDivisibleBy"),[this.schema.divisibleBy]),status:n},n=this._validateMaximum(),i.stringValueTooLarge={message:"",status:n},n||(i.stringValueTooLarge.message=this.schema.exclusiveMaximum?t.substituteTokens(this.view.getMessage("stringValueTooLargeExclusive"),[this.schema.maximum]):t.substituteTokens(this.view.getMessage("stringValueTooLarge"),[this.schema.maximum])),n=this._validateMinimum(),i.stringValueTooSmall={message:"",status:n},n||(i.stringValueTooSmall.message=this.schema.exclusiveMinimum?t.substituteTokens(this.view.getMessage("stringValueTooSmallExclusive"),[this.schema.minimum]):t.substituteTokens(this.view.getMessage("stringValueTooSmall"),[this.schema.minimum])),n=this._validateMultipleOf(),i.stringValueNotMultipleOf={message:"",status:n},n||(i.stringValueNotMultipleOf.message=t.substituteTokens(this.view.getMessage("stringValueNotMultipleOf"),[this.schema.multipleOf])),r&&i.stringNotANumber.status&&i.stringDivisibleBy.status&&i.stringValueTooLarge.status&&i.stringValueTooSmall.status&&i.stringValueNotMultipleOf.status},_validateNumber:function(){var n=this._getControlVal(),i,r;return(this.numberDecimalSeparator!="."&&(n=n.replace(this.numberDecimalSeparator,".")),typeof n=="number"&&(n=""+n),t.isValEmpty(n))?!0:(i=t.testRegex(t.regexps.number,n),!i)?!1:(r=this.getValue(),isNaN(r))?!1:!0},_validateDivisibleBy:function(){var n=this.getValue();return!t.isEmpty(this.schema.divisibleBy)&&n%this.schema.divisibleBy!=0?!1:!0},_validateMaximum:function(){var n=this.getValue();return!t.isEmpty(this.schema.maximum)&&(n>this.schema.maximum||!t.isEmpty(this.schema.exclusiveMaximum)&&n==this.schema.maximum&&this.schema.exclusiveMaximum)?!1:!0},_validateMinimum:function(){var n=this.getValue();return!t.isEmpty(this.schema.minimum)&&(n<this.schema.minimum||!t.isEmpty(this.schema.exclusiveMinimum)&&n==this.schema.minimum&&this.schema.exclusiveMinimum)?!1:!0},_validateMultipleOf:function(){var n=this.getValue();return!t.isEmpty(this.schema.multipleOf)&&n&&this.schema.multipleOf!==0?!1:!0},getType:function(){return"number"},getSchemaOfSchema:function(){return t.merge(this.base(),{properties:{multipleOf:{title:"Multiple Of",description:"Property value must be a multiple of the multipleOf schema property such that division by this value yields an interger (mod zero).",type:"number"},minimum:{title:"Minimum",description:"Minimum value of the property.",type:"number"},maximum:{title:"Maximum",description:"Maximum value of the property.",type:"number"},exclusiveMinimum:{title:"Exclusive Minimum",description:"Property value can not equal the number defined by the minimum schema property.",type:"boolean","default":!1},exclusiveMaximum:{title:"Exclusive Maximum",description:"Property value can not equal the number defined by the maximum schema property.",type:"boolean","default":!1}}})},getOptionsForSchema:function(){return t.merge(this.base(),{fields:{multipleOf:{title:"Multiple Of",description:"The value must be a integral multiple of the property",type:"number"},minimum:{title:"Minimum",description:"Minimum value of the property",type:"number"},maximum:{title:"Maximum",description:"Maximum value of the property",type:"number"},exclusiveMinimum:{rightLabel:"Exclusive minimum ?",helper:"Field value must be greater than but not equal to this number if checked",type:"checkbox"},exclusiveMaximum:{rightLabel:"Exclusive Maximum ?",helper:"Field value must be less than but not equal to this number if checked",type:"checkbox"}}})},getTitle:function(){return"Number Field"},getDescription:function(){return"Field for float numbers."}});t.registerMessages({stringValueTooSmall:"The minimum value for this field is {0}",stringValueTooLarge:"The maximum value for this field is {0}",stringValueTooSmallExclusive:"Value of this field must be greater than {0}",stringValueTooLargeExclusive:"Value of this field must be less than {0}",stringDivisibleBy:"The value must be divisible by {0}",stringNotANumber:"This value is not a number.",stringValueNotMultipleOf:"This value is not a multiple of {0}"});t.registerFieldClass("number",t.Fields.NumberField);t.registerDefaultSchemaFieldMapping("number","number")}(jQuery),function(n){var t=n.alpaca;t.Fields.Select2Field=t.Fields.ListField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.sf=f.servicesFramework},getFieldType:function(){return"select"},setup:function(){var n=this;n.schema.type&&n.schema.type==="array"&&(n.options.multiple=!0,n.options.removeDefaultNone=!0);this.base()},getValue:function(){var n,i;if(this.control&&this.control.length>0){if(n=this._getControlVal(!0),typeof n=="undefined")n=this.data;else if(t.isArray(n))for(i=0;i<n.length;i++)n[i]=this.ensureProperType(n[i]);return this.base(n)}},setValue:function(n){t.isArray(n)?t.compareArrayContent(n,this.getValue())||(!t.isEmpty(n)&&this.control&&this.control.val(n),this.base(n)):n!==this.getValue()&&(this.control&&typeof n!="undefined"&&n!=null&&this.control.val(n),this.base(n))},getEnum:function(){if(this.schema){if(this.schema["enum"])return this.schema["enum"];if(this.schema.type&&this.schema.type==="array"&&this.schema.items&&this.schema.items["enum"])return this.schema.items["enum"]}},initControlEvents:function(){var n=this,t;if(n.base(),n.options.multiple){t=this.control.parent().find(".select2-search__field");t.focus(function(t){n.suspendBlurFocus||(n.onFocus.call(n,t),n.trigger("focus",t))});t.blur(function(t){n.suspendBlurFocus||(n.onBlur.call(n,t),n.trigger("blur",t))});this.control.on("change",function(t){n.onChange.call(n,t);n.trigger("change",t)})}},beforeRenderControl:function(i,r){var u=this;this.base(i,function(){if(u.options.dataService&&u.options.dataService){u.selectOptions=[];var f=function(){u.schema.enum=[];u.options.optionLabels=[];for(var n=0;n<u.selectOptions.length;n++)u.schema.enum.push(u.selectOptions[n].value),u.options.optionLabels.push(u.selectOptions[n].text);i.selectOptions=u.selectOptions;r()},e="{}";u.options.dataService.data&&(e=u.options.dataService.data);u.options.dataService.module||(u.options.dataService.module="OpenContent");u.options.dataService.controller||(u.options.dataService.controller="OpenContentAPI");u.options.dataService.action||(u.options.dataService.action="Lookup");n.ajax({url:u.sf.getServiceRoot(u.options.dataService.module)+u.options.dataService.controller+"/"+u.options.dataService.action,beforeSend:u.sf.setModuleHeaders,type:"post",dataType:"json",data:e,success:function(i){var r=i;u.options.dsTransformer&&t.isFunction(u.options.dsTransformer)&&(r=u.options.dsTransformer(r));r&&(t.isObject(r)?(n.each(r,function(n,t){u.selectOptions.push({value:n,text:t})}),f()):t.isArray(r)&&(n.each(r,function(n,t){u.selectOptions.push({value:t.value,text:t.text})}),f()))},error:function(n,t,i){u.errorCallback({message:"Unable to load data from uri : "+u.options.dataSource,stage:"DATASOURCE_LOADING_ERROR",details:{jqXHR:n,textStatus:t,errorThrown:i}})}})}else r()})},prepareControlModel:function(n){var t=this;this.base(function(i){i.selectOptions=t.selectOptions;n(i)})},afterRenderControl:function(i,r){var u=this;this.base(i,function(){if(t.isUndefined(u.data)&&u.options.emptySelectFirst&&u.selectOptions&&u.selectOptions.length>0&&(u.data=u.selectOptions[0].value),u.data&&u.setValue(u.data),n.fn.select2){var i=null;i=u.options.select2?u.options.select2:{};n(u.getControlEl()).select2(i)}r()})},_validateEnum:function(){var u=this,i,r;return this.schema["enum"]?(i=this.data,!this.isRequired()&&t.isValEmpty(i))?!0:this.options.multiple?(r=!0,i||(i=[]),t.isArray(i)||t.isObject(i)||(i=[i]),n.each(i,function(t,i){if(n.inArray(i,u.schema["enum"])<=-1)return r=!1,!1}),r):n.inArray(i,this.schema["enum"])>-1:!0},onChange:function(n){this.base(n);var i=this;t.later(25,this,function(){var n=i.getValue();i.setValue(n);i.refreshValidationState()})},_validateMinItems:function(){return this.schema.items&&this.schema.items.minItems&&n(":selected",this.control).length<this.schema.items.minItems?!1:!0},_validateMaxItems:function(){return this.schema.items&&this.schema.items.maxItems&&n(":selected",this.control).length>this.schema.items.maxItems?!1:!0},handleValidate:function(){var r=this.base(),i=this.validation,n=this._validateMaxItems();return i.tooManyItems={message:n?"":t.substituteTokens(this.getMessage("tooManyItems"),[this.schema.items.maxItems]),status:n},n=this._validateMinItems(),i.notEnoughItems={message:n?"":t.substituteTokens(this.getMessage("notEnoughItems"),[this.schema.items.minItems]),status:n},r&&i.tooManyItems.status&&i.notEnoughItems.status},focus:function(t){if(this.control&&this.control.length>0){var i=n(this.control).get(0);i.focus();t&&t(this)}},getTitle:function(){return"Select Field"},getDescription:function(){return"Select Field"},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{multiple:{title:"Mulitple Selection",description:"Allow multiple selection if true.",type:"boolean","default":!1},size:{title:"Displayed Options",description:"Number of options to be shown.",type:"number"},emptySelectFirst:{title:"Empty Select First",description:"If the data is empty, then automatically select the first item in the list.",type:"boolean","default":!1},multiselect:{title:"Multiselect Plugin Settings",description:"Multiselect plugin properties - http://davidstutz.github.io/bootstrap-multiselect",type:"any"}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{multiple:{rightLabel:"Allow multiple selection ?",helper:"Allow multiple selection if checked",type:"checkbox"},size:{type:"integer"},emptySelectFirst:{type:"checkbox",rightLabel:"Empty Select First"},multiselect:{type:"object",rightLabel:"Multiselect plugin properties - http://davidstutz.github.io/bootstrap-multiselect"}}})}});t.registerFieldClass("select2",t.Fields.Select2Field)}(jQuery),function(n){var t=n.alpaca;t.Fields.Image2Field=t.Fields.ListField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.sf=f.servicesFramework;this.dataSource={}},getFieldType:function(){return"select"},setup:function(){var n=this;n.schema.type&&n.schema.type==="array"&&(n.options.multiple=!0,n.options.removeDefaultNone=!0);this.options.folder||(this.options.folder="");this.base()},getValue:function(){var n,i;if(this.control&&this.control.length>0){if(n=this._getControlVal(!0),typeof n=="undefined")n=this.data;else if(t.isArray(n))for(i=0;i<n.length;i++)n[i]=this.ensureProperType(n[i]);return this.base(n)}},setValue:function(n){t.isArray(n)?t.compareArrayContent(n,this.getValue())||(!t.isEmpty(n)&&this.control&&this.control.val(n),this.base(n)):n!==this.getValue()&&(this.control&&typeof n!="undefined"&&n!=null&&this.control.val(n),this.base(n))},getEnum:function(){if(this.schema){if(this.schema["enum"])return this.schema["enum"];if(this.schema.type&&this.schema.type==="array"&&this.schema.items&&this.schema.items["enum"])return this.schema.items["enum"]}},initControlEvents:function(){var n=this,t;if(n.base(),n.options.multiple){t=this.control.parent().find(".select2-search__field");t.focus(function(t){n.suspendBlurFocus||(n.onFocus.call(n,t),n.trigger("focus",t))});t.blur(function(t){n.suspendBlurFocus||(n.onBlur.call(n,t),n.trigger("blur",t))});this.control.on("change",function(t){n.onChange.call(n,t);n.trigger("change",t)})}},beforeRenderControl:function(i,r){var u=this;this.base(i,function(){u.selectOptions=[];var f=function(){u.schema.enum=[];u.options.optionLabels=[];for(var n=0;n<u.selectOptions.length;n++)u.schema.enum.push(u.selectOptions[n].value),u.options.optionLabels.push(u.selectOptions[n].text);i.selectOptions=u.selectOptions;r()},e={q:"*",d:u.options.folder};n.ajax({url:u.sf.getServiceRoot("OpenContent")+"DnnEntitiesAPI/ImagesLookup",beforeSend:u.sf.setModuleHeaders,type:"get",dataType:"json",data:e,success:function(i){var r=i;u.options.dsTransformer&&t.isFunction(u.options.dsTransformer)&&(r=u.options.dsTransformer(r));r&&(t.isObject(r)?(n.each(r,function(n,t){u.selectOptions.push({value:n,text:t})}),f()):t.isArray(r)&&(n.each(r,function(n,t){u.selectOptions.push({value:t.value,text:t.text});u.dataSource[t.value]=t}),f()))},error:function(n,t,i){u.errorCallback({message:"Unable to load data from uri : "+u.options.dataSource,stage:"DATASOURCE_LOADING_ERROR",details:{jqXHR:n,textStatus:t,errorThrown:i}})}})})},prepareControlModel:function(n){var t=this;this.base(function(i){i.selectOptions=t.selectOptions;n(i)})},afterRenderControl:function(i,r){var u=this;this.base(i,function(){if(t.isUndefined(u.data)&&u.options.emptySelectFirst&&u.selectOptions&&u.selectOptions.length>0&&(u.data=u.selectOptions[0].value),u.data&&u.setValue(u.data),n.fn.select2){var i=null;i=u.options.select2?u.options.select2:{};i.templateResult=function(t){if(!t.id)return t.text;return n('<span><img src="'+u.dataSource[t.id].url+'" style="height: 45px;width: 54px;"  /> '+t.text+"<\/span>")};i.templateSelection=function(t){if(!t.id)return t.text;return n('<span><img src="'+u.dataSource[t.id].url+'" style="height: 15px;width: 18px;"  /> '+t.text+"<\/span>")};n(u.getControlEl()).select2(i)}r()})},getFileUrl:function(t){var i={fileid:t};n.ajax({url:self.sf.getServiceRoot("OpenContent")+"DnnEntitiesAPI/FileUrl",beforeSend:self.sf.setModuleHeaders,type:"get",asych:!1,dataType:"json",data:i,success:function(n){return n},error:function(){return""}})},_validateEnum:function(){var u=this,i,r;return this.schema["enum"]?(i=this.data,!this.isRequired()&&t.isValEmpty(i))?!0:this.options.multiple?(r=!0,i||(i=[]),t.isArray(i)||t.isObject(i)||(i=[i]),n.each(i,function(t,i){if(n.inArray(i,u.schema["enum"])<=-1)return r=!1,!1}),r):n.inArray(i,this.schema["enum"])>-1:!0},onChange:function(n){this.base(n);var i=this;t.later(25,this,function(){var n=i.getValue();i.setValue(n);i.refreshValidationState()})},_validateMinItems:function(){return this.schema.items&&this.schema.items.minItems&&n(":selected",this.control).length<this.schema.items.minItems?!1:!0},_validateMaxItems:function(){return this.schema.items&&this.schema.items.maxItems&&n(":selected",this.control).length>this.schema.items.maxItems?!1:!0},handleValidate:function(){var r=this.base(),i=this.validation,n=this._validateMaxItems();return i.tooManyItems={message:n?"":t.substituteTokens(this.getMessage("tooManyItems"),[this.schema.items.maxItems]),status:n},n=this._validateMinItems(),i.notEnoughItems={message:n?"":t.substituteTokens(this.getMessage("notEnoughItems"),[this.schema.items.minItems]),status:n},r&&i.tooManyItems.status&&i.notEnoughItems.status},focus:function(t){if(this.control&&this.control.length>0){var i=n(this.control).get(0);i.focus();t&&t(this)}},getTitle:function(){return"Select Field"},getDescription:function(){return"Select Field"},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{multiple:{title:"Mulitple Selection",description:"Allow multiple selection if true.",type:"boolean","default":!1},size:{title:"Displayed Options",description:"Number of options to be shown.",type:"number"},emptySelectFirst:{title:"Empty Select First",description:"If the data is empty, then automatically select the first item in the list.",type:"boolean","default":!1},multiselect:{title:"Multiselect Plugin Settings",description:"Multiselect plugin properties - http://davidstutz.github.io/bootstrap-multiselect",type:"any"}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{multiple:{rightLabel:"Allow multiple selection ?",helper:"Allow multiple selection if checked",type:"checkbox"},size:{type:"integer"},emptySelectFirst:{type:"checkbox",rightLabel:"Empty Select First"},multiselect:{type:"object",rightLabel:"Multiselect plugin properties - http://davidstutz.github.io/bootstrap-multiselect"}}})}});t.registerFieldClass("image2",t.Fields.Image2Field)}(jQuery),function(n){var t=n.alpaca;t.Fields.MLImage2Field=t.Fields.Image2Field.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.culture=f.culture;this.defaultCulture=f.defaultCulture},setup:function(){var n=this;this.data&&t.isObject(this.data)?this.olddata=this.data:this.data&&(this.olddata={},this.olddata[this.defaultCulture]=this.data);this.base()},getValue:function(){var r=this.base(r),u=this,i={};return(this.olddata&&t.isObject(this.olddata)&&n.each(this.olddata,function(n,r){var f=t.copyOf(r);n!=u.culture&&(i[n]=f)}),r!=""&&(i[u.culture]=r),n.isEmptyObject(i))?"":i},setValue:function(n){if(n!==""){if(!n){this.base("");return}if(t.isObject(n)){var i=n[this.culture];if(!i){this.base("");return}this.base(i)}else this.base(n)}},afterRenderControl:function(n,t){var i=this;this.base(n,function(){i.handlePostRender2(function(){t()})})},handlePostRender2:function(t){var i=this,r=this.getControlEl();t();n(this.control.get(0)).after('<img src="/images/Flags/'+this.culture+'.gif" />')}});t.registerFieldClass("mlimage2",t.Fields.MLImage2Field)}(jQuery),function(n){var t=n.alpaca;t.Fields.File2Field=t.Fields.ListField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.sf=f.servicesFramework;this.dataSource={}},getFieldType:function(){return"select"},setup:function(){var n=this;n.schema.type&&n.schema.type==="array"&&(n.options.multiple=!0,n.options.removeDefaultNone=!0);this.options.folder||(this.options.folder="");this.base()},getValue:function(){var n,i;if(this.control&&this.control.length>0){if(n=this._getControlVal(!0),typeof n=="undefined")n=this.data;else if(t.isArray(n))for(i=0;i<n.length;i++)n[i]=this.ensureProperType(n[i]);return this.base(n)}},setValue:function(n){t.isArray(n)?t.compareArrayContent(n,this.getValue())||(!t.isEmpty(n)&&this.control&&this.control.val(n),this.base(n)):n!==this.getValue()&&(this.control&&typeof n!="undefined"&&n!=null&&this.control.val(n),this.base(n))},getEnum:function(){if(this.schema){if(this.schema["enum"])return this.schema["enum"];if(this.schema.type&&this.schema.type==="array"&&this.schema.items&&this.schema.items["enum"])return this.schema.items["enum"]}},initControlEvents:function(){var n=this,t;if(n.base(),n.options.multiple){t=this.control.parent().find(".select2-search__field");t.focus(function(t){n.suspendBlurFocus||(n.onFocus.call(n,t),n.trigger("focus",t))});t.blur(function(t){n.suspendBlurFocus||(n.onBlur.call(n,t),n.trigger("blur",t))});this.control.on("change",function(t){n.onChange.call(n,t);n.trigger("change",t)})}},beforeRenderControl:function(i,r){var u=this;this.base(i,function(){u.selectOptions=[];var f=function(){u.schema.enum=[];u.options.optionLabels=[];for(var n=0;n<u.selectOptions.length;n++)u.schema.enum.push(u.selectOptions[n].value),u.options.optionLabels.push(u.selectOptions[n].text);i.selectOptions=u.selectOptions;r()},e={q:"*",d:u.options.folder};n.ajax({url:u.sf.getServiceRoot("OpenContent")+"DnnEntitiesAPI/FilesLookup",beforeSend:u.sf.setModuleHeaders,type:"get",dataType:"json",data:e,success:function(i){var r=i;u.options.dsTransformer&&t.isFunction(u.options.dsTransformer)&&(r=u.options.dsTransformer(r));r&&(t.isObject(r)?(n.each(r,function(n,t){u.selectOptions.push({value:n,text:t})}),f()):t.isArray(r)&&(n.each(r,function(n,t){u.selectOptions.push({value:t.value,text:t.text});u.dataSource[t.value]=t}),f()))},error:function(n,t,i){u.errorCallback({message:"Unable to load data from uri : "+u.options.dataSource,stage:"DATASOURCE_LOADING_ERROR",details:{jqXHR:n,textStatus:t,errorThrown:i}})}})})},prepareControlModel:function(n){var t=this;this.base(function(i){i.selectOptions=t.selectOptions;n(i)})},afterRenderControl:function(i,r){var u=this;this.base(i,function(){if(t.isUndefined(u.data)&&u.options.emptySelectFirst&&u.selectOptions&&u.selectOptions.length>0&&(u.data=u.selectOptions[0].value),u.data&&u.setValue(u.data),n.fn.select2){var i=null;i=u.options.select2?u.options.select2:{};i.templateResult=function(t){if(!t.id)return t.text;return n("<span>"+t.text+"<\/span>")};i.templateSelection=function(t){if(!t.id)return t.text;return n("<span>"+t.text+"<\/span>")};n(u.getControlEl()).select2(i)}r()})},getFileUrl:function(t){var i={fileid:t};n.ajax({url:self.sf.getServiceRoot("OpenContent")+"DnnEntitiesAPI/FileUrl",beforeSend:self.sf.setModuleHeaders,type:"get",asych:!1,dataType:"json",data:i,success:function(n){return n},error:function(){return""}})},_validateEnum:function(){var u=this,i,r;return this.schema["enum"]?(i=this.data,!this.isRequired()&&t.isValEmpty(i))?!0:this.options.multiple?(r=!0,i||(i=[]),t.isArray(i)||t.isObject(i)||(i=[i]),n.each(i,function(t,i){if(n.inArray(i,u.schema["enum"])<=-1)return r=!1,!1}),r):n.inArray(i,this.schema["enum"])>-1:!0},onChange:function(n){this.base(n);var i=this;t.later(25,this,function(){var n=i.getValue();i.setValue(n);i.refreshValidationState()})},_validateMinItems:function(){return this.schema.items&&this.schema.items.minItems&&n(":selected",this.control).length<this.schema.items.minItems?!1:!0},_validateMaxItems:function(){return this.schema.items&&this.schema.items.maxItems&&n(":selected",this.control).length>this.schema.items.maxItems?!1:!0},handleValidate:function(){var r=this.base(),i=this.validation,n=this._validateMaxItems();return i.tooManyItems={message:n?"":t.substituteTokens(this.getMessage("tooManyItems"),[this.schema.items.maxItems]),status:n},n=this._validateMinItems(),i.notEnoughItems={message:n?"":t.substituteTokens(this.getMessage("notEnoughItems"),[this.schema.items.minItems]),status:n},r&&i.tooManyItems.status&&i.notEnoughItems.status},focus:function(t){if(this.control&&this.control.length>0){var i=n(this.control).get(0);i.focus();t&&t(this)}},getTitle:function(){return"Select File Field"},getDescription:function(){return"Select File Field"},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{multiple:{title:"Mulitple Selection",description:"Allow multiple selection if true.",type:"boolean","default":!1},size:{title:"Displayed Options",description:"Number of options to be shown.",type:"number"},emptySelectFirst:{title:"Empty Select First",description:"If the data is empty, then automatically select the first item in the list.",type:"boolean","default":!1},multiselect:{title:"Multiselect Plugin Settings",description:"Multiselect plugin properties - http://davidstutz.github.io/bootstrap-multiselect",type:"any"}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{multiple:{rightLabel:"Allow multiple selection ?",helper:"Allow multiple selection if checked",type:"checkbox"},size:{type:"integer"},emptySelectFirst:{type:"checkbox",rightLabel:"Empty Select First"},multiselect:{type:"object",rightLabel:"Multiselect plugin properties - http://davidstutz.github.io/bootstrap-multiselect"}}})}});t.registerFieldClass("file2",t.Fields.File2Field)}(jQuery),function(n){var t=n.alpaca;t.Fields.Url2Field=t.Fields.ListField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.sf=f.servicesFramework;this.culture=f.culture;this.dataSource={}},getFieldType:function(){return"select"},setup:function(){var n=this;n.schema.type&&n.schema.type==="array"&&(n.options.multiple=!0,n.options.removeDefaultNone=!0);this.base()},getValue:function(){var n,i;if(this.control&&this.control.length>0){if(n=this._getControlVal(!0),typeof n=="undefined")n=this.data;else if(t.isArray(n))for(i=0;i<n.length;i++)n[i]=this.ensureProperType(n[i]);return this.base(n)}},setValue:function(n){t.isArray(n)?t.compareArrayContent(n,this.getValue())||(!t.isEmpty(n)&&this.control&&this.control.val(n),this.base(n)):n!==this.getValue()&&(this.control&&typeof n!="undefined"&&n!=null&&this.control.val(n),this.base(n))},getEnum:function(){if(this.schema){if(this.schema["enum"])return this.schema["enum"];if(this.schema.type&&this.schema.type==="array"&&this.schema.items&&this.schema.items["enum"])return this.schema.items["enum"]}},initControlEvents:function(){var n=this,t;if(n.base(),n.options.multiple){t=this.control.parent().find(".select2-search__field");t.focus(function(t){n.suspendBlurFocus||(n.onFocus.call(n,t),n.trigger("focus",t))});t.blur(function(t){n.suspendBlurFocus||(n.onBlur.call(n,t),n.trigger("blur",t))});this.control.on("change",function(t){n.onChange.call(n,t);n.trigger("change",t)})}},beforeRenderControl:function(i,r){var u=this;this.base(i,function(){u.selectOptions=[];var f=function(){u.schema.enum=[];u.options.optionLabels=[];for(var n=0;n<u.selectOptions.length;n++)u.schema.enum.push(u.selectOptions[n].value),u.options.optionLabels.push(u.selectOptions[n].text);i.selectOptions=u.selectOptions;r()},e={q:"*",l:u.culture};n.ajax({url:u.sf.getServiceRoot("OpenContent")+"DnnEntitiesAPI/TabsLookup",beforeSend:u.sf.setModuleHeaders,type:"get",dataType:"json",data:e,success:function(i){var r=i;u.options.dsTransformer&&t.isFunction(u.options.dsTransformer)&&(r=u.options.dsTransformer(r));r&&(t.isObject(r)?(n.each(r,function(n,t){u.selectOptions.push({value:n,text:t})}),f()):t.isArray(r)&&(n.each(r,function(n,t){u.selectOptions.push({value:t.value,text:t.text});u.dataSource[t.value]=t}),f()))},error:function(n,t,i){u.errorCallback({message:"Unable to load data from uri : "+u.options.dataSource,stage:"DATASOURCE_LOADING_ERROR",details:{jqXHR:n,textStatus:t,errorThrown:i}})}})})},prepareControlModel:function(n){var t=this;this.base(function(i){i.selectOptions=t.selectOptions;n(i)})},afterRenderControl:function(i,r){var u=this;this.base(i,function(){if(t.isUndefined(u.data)&&u.options.emptySelectFirst&&u.selectOptions&&u.selectOptions.length>0&&(u.data=u.selectOptions[0].value),u.data&&u.setValue(u.data),n.fn.select2){var i=null;i=u.options.select2?u.options.select2:{};i.templateResult=function(t){if(!t.id)return t.text;return n("<span>"+t.text+"<\/span>")};i.templateSelection=function(t){if(!t.id)return t.text;return n("<span>"+t.text+"<\/span>")};n(u.getControlEl()).select2(i)}r()})},_validateEnum:function(){var u=this,i,r;return this.schema["enum"]?(i=this.data,!this.isRequired()&&t.isValEmpty(i))?!0:this.options.multiple?(r=!0,i||(i=[]),t.isArray(i)||t.isObject(i)||(i=[i]),n.each(i,function(t,i){if(n.inArray(i,u.schema["enum"])<=-1)return r=!1,!1}),r):n.inArray(i,this.schema["enum"])>-1:!0},onChange:function(n){this.base(n);var i=this;t.later(25,this,function(){var n=i.getValue();i.setValue(n);i.refreshValidationState()})},_validateMinItems:function(){return this.schema.items&&this.schema.items.minItems&&n(":selected",this.control).length<this.schema.items.minItems?!1:!0},_validateMaxItems:function(){return this.schema.items&&this.schema.items.maxItems&&n(":selected",this.control).length>this.schema.items.maxItems?!1:!0},handleValidate:function(){var r=this.base(),i=this.validation,n=this._validateMaxItems();return i.tooManyItems={message:n?"":t.substituteTokens(this.getMessage("tooManyItems"),[this.schema.items.maxItems]),status:n},n=this._validateMinItems(),i.notEnoughItems={message:n?"":t.substituteTokens(this.getMessage("notEnoughItems"),[this.schema.items.minItems]),status:n},r&&i.tooManyItems.status&&i.notEnoughItems.status},focus:function(t){if(this.control&&this.control.length>0){var i=n(this.control).get(0);i.focus();t&&t(this)}},getTitle:function(){return"Select File Field"},getDescription:function(){return"Select File Field"},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{multiple:{title:"Mulitple Selection",description:"Allow multiple selection if true.",type:"boolean","default":!1},size:{title:"Displayed Options",description:"Number of options to be shown.",type:"number"},emptySelectFirst:{title:"Empty Select First",description:"If the data is empty, then automatically select the first item in the list.",type:"boolean","default":!1},multiselect:{title:"Multiselect Plugin Settings",description:"Multiselect plugin properties - http://davidstutz.github.io/bootstrap-multiselect",type:"any"}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{multiple:{rightLabel:"Allow multiple selection ?",helper:"Allow multiple selection if checked",type:"checkbox"},size:{type:"integer"},emptySelectFirst:{type:"checkbox",rightLabel:"Empty Select First"},multiselect:{type:"object",rightLabel:"Multiselect plugin properties - http://davidstutz.github.io/bootstrap-multiselect"}}})}});t.registerFieldClass("url2",t.Fields.Url2Field)}(jQuery),function(n){var t=n.alpaca;n.alpaca.Fields.DnnUrlField=n.alpaca.Fields.TextField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.culture=f.culture;this.sf=f.servicesFramework},setup:function(){this.base()},applyTypeAhead:function(){var t=this,h=h={},i=i={},r,u,f,e,o,s;if(i.name||(i.name=t.getId()),r=r={},u={datumTokenizer:function(n){return Bloodhound.tokenizers.whitespace(n.value)},queryTokenizer:Bloodhound.tokenizers.whitespace},u.remote={url:t.sf.getServiceRoot("OpenContent")+"DnnEntitiesAPI/Tabs?q=%QUERY&l="+t.culture,ajax:{beforeSend:t.sf.setModuleHeaders}},i.filter&&(u.remote.filter=i.filter),i.replace&&(u.remote.replace=i.replace),f=new Bloodhound(u),f.initialize(),i.source=f.ttAdapter(),i.templates={empty:"Nothing found...",suggestion:"{{name}}"},i.templates)for(e in i.templates)o=i.templates[e],typeof o=="string"&&(i.templates[e]=Handlebars.compile(o));n(t.control).typeahead(h,i);n(t.control).on("typeahead:autocompleted",function(i,r){t.setValue(r.value);n(t.control).change()});n(t.control).on("typeahead:selected",function(i,r){t.setValue(r.value);n(t.control).change()});if(r){if(r.autocompleted)n(t.control).on("typeahead:autocompleted",function(n,t){r.autocompleted(n,t)});if(r.selected)n(t.control).on("typeahead:selected",function(n,t){r.selected(n,t)})}s=n(t.control);n(t.control).change(function(){var i=n(this).val(),t=n(s).typeahead("val");t!==i&&n(s).typeahead("val",t)});n(t.field).find("span.twitter-typeahead").first().css("display","block");n(t.field).find("span.twitter-typeahead input.tt-input").first().css("background-color","")}});t.registerFieldClass("url",t.Fields.DnnUrlField)}(jQuery),function(n){var t=n.alpaca;t.Fields.wysihtmlField=t.Fields.TextAreaField.extend({getFieldType:function(){return"wysihtml"},setup:function(){this.data||(this.data="");this.base();typeof this.options.wysihtml=="undefined"&&(this.options.wysihtml={})},afterRenderControl:function(t,i){var r=this;this.base(t,function(){if(!r.isDisplayOnly()&&r.control){var t=r.control,u=n(t).find("#"+r.id)[0];r.editor=new wysihtml5.Editor(u,{toolbar:n(t).find("#"+r.id+"-toolbar")[0],parserRules:wysihtml5ParserRules});wysihtml5.commands.custom_class={exec:function(n,t,i){return wysihtml5.commands.formatBlock.exec(n,t,"p",i,new RegExp(i,"g"))},state:function(n,t,i){return wysihtml5.commands.formatBlock.state(n,t,"p",i,new RegExp(i,"g"))}}}i()})},getEditor:function(){return this.editor},setValue:function(n){var t=this;this.editor&&this.editor.setValue(n);this.base(n)},getValue:function(){var n=null;return this.editor&&(n=this.editor.currentView=="source"?this.editor.sourceView.textarea.value:this.editor.getValue()),n},getTitle:function(){return"wysihtml"},getDescription:function(){return"Provides an instance of a wysihtml control for use in editing HTML."},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{wysihtml:{title:"CK Editor options",description:"Use this entry to provide configuration options to the underlying CKEditor plugin.",type:"any"}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{wysiwyg:{type:"any"}}})}});t.registerFieldClass("wysihtml",t.Fields.wysihtmlField)}(jQuery),function(n){var t=n.alpaca;t.Fields.MLCKEditorField=t.Fields.CKEditorField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.culture=f.culture;this.defaultCulture=f.defaultCulture},setup:function(){this.data&&t.isObject(this.data)?this.olddata=this.data:this.data&&(this.olddata={},this.olddata[this.defaultCulture]=this.data);this.base()},getValue:function(){var r=this.base(),u=this,i={};return(this.olddata&&t.isObject(this.olddata)&&n.each(this.olddata,function(n,r){var f=t.copyOf(r);n!=u.culture&&(i[n]=f)}),r!=""&&(i[u.culture]=r),n.isEmptyObject(i))?"":i},setValue:function(n){if(n!==""){if(!n){this.base("");return}if(t.isObject(n)){var i=n[this.culture];if(!i){this.base("");return}this.base(i)}else this.base(n)}},afterRenderControl:function(n,t){var i=this;this.base(n,function(){i.handlePostRender(function(){t()})})},handlePostRender:function(t){var i=this,r=this.getControlEl();n(this.control.get(0)).after('<img src="/images/Flags/'+this.culture+'.gif" />');t()},getTitle:function(){return"Multi Language CKEditor Field"},getDescription:function(){return"Multi Language CKEditor field ."},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{separator:{title:"Separator",description:"Separator used to split tags.",type:"string","default":","}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{separator:{type:"text"}}})}});t.registerFieldClass("mlckeditor",t.Fields.MLCKEditorField)}(jQuery),function(n){var t=n.alpaca;t.Fields.MLFileField=t.Fields.FileField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.culture=f.culture;this.defaultCulture=f.defaultCulture},setup:function(){this.data&&t.isObject(this.data)?this.olddata=this.data:this.data&&(this.olddata={},this.olddata[this.defaultCulture]=this.data);this.base()},getValue:function(){var r=this.base(),u=this,i={};return(this.olddata&&t.isObject(this.olddata)&&n.each(this.olddata,function(n,r){var f=t.copyOf(r);n!=u.culture&&(i[n]=f)}),r!=""&&(i[u.culture]=r),n.isEmptyObject(i))?"":i},setValue:function(n){if(n!==""){if(!n){this.base("");return}if(t.isObject(n)){var i=n[this.culture];if(!i){this.base("");return}this.base(i)}else this.base(n)}},afterRenderControl:function(n,t){var i=this;this.base(n,function(){i.handlePostRender(function(){t()})})},handlePostRender:function(t){var i=this,r=this.getControlEl();n(this.control.get(0)).after('<img src="/images/Flags/'+this.culture+'.gif" />');t()},getTitle:function(){return"Multi Language Url Field"},getDescription:function(){return"Multi Language Url field ."},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{separator:{title:"Separator",description:"Separator used to split tags.",type:"string","default":","}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{separator:{type:"text"}}})}});t.registerFieldClass("mlfile",t.Fields.MLFileField)}(jQuery),function(n){var t=n.alpaca;t.Fields.MLImageField=t.Fields.ImageField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.culture=f.culture;this.defaultCulture=f.defaultCulture},setup:function(){this.data&&t.isObject(this.data)?this.olddata=this.data:this.data&&(this.olddata={},this.olddata[this.defaultCulture]=this.data);this.base()},getValue:function(){var r=this.base(),u=this,i={};return(this.olddata&&t.isObject(this.olddata)&&n.each(this.olddata,function(n,r){var f=t.copyOf(r);n!=u.culture&&(i[n]=f)}),r!=""&&(i[u.culture]=r),n.isEmptyObject(i))?"":i},setValue:function(n){if(n!==""){if(!n){this.base("");return}if(t.isObject(n)){var i=n[this.culture];if(!i){this.base("");return}this.base(i)}else this.base(n)}},afterRenderControl:function(n,t){var i=this;this.base(n,function(){i.handlePostRender2(function(){t()})})},handlePostRender2:function(t){var i=this,r=this.getControlEl();n(this.control.get(0)).after('<img src="/images/Flags/'+this.culture+'.gif" />');t()},getTitle:function(){return"Multi Language Url Field"},getDescription:function(){return"Multi Language Url field ."},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{separator:{title:"Separator",description:"Separator used to split tags.",type:"string","default":","}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{separator:{type:"text"}}})}});t.registerFieldClass("mlimage",t.Fields.MLImageField)}(jQuery),function(n){var t=n.alpaca;t.Fields.MLTextField=t.Fields.TextField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.culture=f.culture;this.defaultCulture=f.defaultCulture},setup:function(){this.data&&t.isObject(this.data)?this.olddata=this.data:this.data&&(this.olddata={},this.olddata[this.defaultCulture]=this.data);this.base()},getValue:function(){var r=this.base(),u=this,i={};return(this.olddata&&t.isObject(this.olddata)&&n.each(this.olddata,function(n,r){var f=t.copyOf(r);n!=u.culture&&(i[n]=f)}),r!=""&&(i[u.culture]=r),n.isEmptyObject(i))?"":i},setValue:function(n){if(n!==""){if(!n){this.base("");return}if(t.isObject(n)){var i=n[this.culture];if(!i){this.base("");return}this.base(i)}else this.base(n)}},afterRenderControl:function(n,t){var i=this;this.base(n,function(){i.handlePostRender(function(){t()})})},handlePostRender:function(t){var i=this,r=this.getControlEl();n(this.control.get(0)).after('<img src="/images/Flags/'+this.culture+'.gif" />');t()},getTitle:function(){return"Multi Language Text Field"},getDescription:function(){return"Multi Language Text field ."},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{separator:{title:"Separator",description:"Separator used to split tags.",type:"string","default":","}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{separator:{type:"text"}}})}});t.registerFieldClass("mltext",t.Fields.MLTextField)}(jQuery),function(n){var t=n.alpaca;t.Fields.MLUrlField=t.Fields.DnnUrlField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.culture=f.culture;this.defaultCulture=f.defaultCulture},setup:function(){this.data&&t.isObject(this.data)?this.olddata=this.data:this.data&&(this.olddata={},this.olddata[this.defaultCulture]=this.data);this.base()},getValue:function(){var r=this.base(),u=this,i={};return(this.olddata&&t.isObject(this.olddata)&&n.each(this.olddata,function(n,r){var f=t.copyOf(r);n!=u.culture&&(i[n]=f)}),r!=""&&(i[u.culture]=r),n.isEmptyObject(i))?"":i},setValue:function(n){if(n!==""){if(!n){this.base("");return}if(t.isObject(n)){var i=n[this.culture];if(!i){this.base("");return}this.base(i)}else this.base(n)}},afterRenderControl:function(n,t){var i=this;this.base(n,function(){i.handlePostRender(function(){t()})})},handlePostRender:function(t){var i=this,r=this.getControlEl();n(this.control.get(0)).after('<img src="/images/Flags/'+this.culture+'.gif" />');t()},getTitle:function(){return"Multi Language Url Field"},getDescription:function(){return"Multi Language Url field ."},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{separator:{title:"Separator",description:"Separator used to split tags.",type:"string","default":","}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{separator:{type:"text"}}})}});t.registerFieldClass("mlurl",t.Fields.MLUrlField)}(jQuery),function(n){var t=n.alpaca;t.Fields.MLwysihtmlField=t.Fields.wysihtmlField.extend({constructor:function(n,t,i,r,u,f){var e=this;this.base(n,t,i,r,u,f);this.culture=f.culture;this.defaultCulture=f.defaultCulture},setup:function(){this.data&&t.isObject(this.data)?this.olddata=this.data:this.data&&(this.olddata={},this.olddata[this.defaultCulture]=this.data);this.base()},getValue:function(){var r=this.base(),u=this,i={};return(this.olddata&&t.isObject(this.olddata)&&n.each(this.olddata,function(n,r){var f=t.copyOf(r);n!=u.culture&&(i[n]=f)}),r!=""&&(i[u.culture]=r),n.isEmptyObject(i))?"":i},setValue:function(n){if(n!==""){if(!n){this.base("");return}if(t.isObject(n)){var i=n[this.culture];if(!i){this.base("");return}this.base(i)}else this.base(n)}},afterRenderControl:function(n,t){var i=this;this.base(n,function(){i.handlePostRender2(function(){t()})})},handlePostRender2:function(t){var i=this,r=this.getControlEl();n(this.control.get(0)).after('<img src="/images/Flags/'+this.culture+'.gif" />');t()},getTitle:function(){return"ML wysihtml Field"},getDescription:function(){return"Provides an instance of a wysihtml control for use in editing MLHTML."},getSchemaOfOptions:function(){return t.merge(this.base(),{properties:{wysihtml:{title:"CK Editor options",description:"Use this entry to provide configuration options to the underlying CKEditor plugin.",type:"any"}}})},getOptionsForOptions:function(){return t.merge(this.base(),{fields:{wysiwyg:{type:"any"}}})}});t.registerFieldClass("mlwysihtml",t.Fields.MLwysihtmlField)}(jQuery);
//# sourceMappingURL=dnnfields.min.js.map
